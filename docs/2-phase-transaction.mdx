---
title: "Two Phases Transaction"
---

The two-phases transaction flow for the SHVA payment service divides a single transaction into two distinct steps:

* An initial information retrieval phase
* A subsequent authorization phase

This flow is often used by clients who implement a loyalty mechanism, as it allows for user interaction between the two phases, such as canceling or changing transaction values.

## Transaction Flow

To understand the 2 Phases transaction flow, consider the following sequence of events:

<Frame>![](/images/docs/2-phase-transaction/images1.png)</Frame>

Here's a breakdown of each step:

1. The client application (labeled as DC) initiates the first phase of the transaction by sending a [`doTransactionPhase1` ](doc:dotransactionphase1)request to the Nayax Device.
2. The Nayax Device prompts the CardHolder to present their card by either inserting, showing, or swiping it.
3. The Nayax Device responds to the DC with a [`doTransactionPhase1` ](doc:dotransactionphase1) response, which contains the card and transaction properties.
4. After any necessary user interaction (e.g., changes or cancellations), the DC sends a [`doTransactionPhase2`](doc:dotransactionphase2) request to the Nayax Device to complete the transaction.
5. The Nayax Device sends an authorization request to the Payment Server.
6. The payment server processes the request and sends an authorization response back to the Nayax Device, which then relays the Authorization response to the DC.
7. At the end of the day, the DC sends a [`doPeriodic`](doc:doperiodic) request to the Nayax Device, which communicates with the payment server to complete the day's batch process. The Nayax Device then sends a [`doPeriodic`](doc:doperiodic) response back to the DC.

## See Also

<CardGroup cols={3}>
  <Card title="Regular Transaction" href="/docs/single-phase-transaction" icon="arrow-up-right" />
  <Card title="Pre-Authorization (Israel)" href="/docs/tweezercomm-pre-authorization-israel" icon="arrow-up-right" />
  <Card title="Defferred Payment" href="/docs/tweezercomm-deferred-payment" icon="arrow-up-right" />
  <Card title="Split Transaction" href="/docs/tweezercomm-split-transaction" icon="arrow-up-right" />
</CardGroup>
