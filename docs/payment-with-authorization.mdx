---
title: "Payment with Pre-Authorization"
---

Payment with pre-authorization is the recommended approach by Nayax due to its more robust process, which makes it safer. It is composed of two steps:

1. Pre-authorization
2. Settlement

The following sections will detail each step.

<Note>
**Single-step payment**

If you prefer, you can perform the authorization and settlement in just one step. To learn more about this process, visit the [Single Step Payment](doc:single-step-payment) page.
</Note>

### Step 1: Pre-authorization

In the first step, the host machine uses the EMV Core to authorize a certain amount to perform the payment operation with the buyer's card. See the following Diagram:

<Frame>![](images/docs/payment-with-authorization/images1.png)</Frame>

Where:

1. The host machine calls the [`PreAuthorize`](doc:payment-1#preauthorize) method using the EMV Core API. This is the only action performed by the host machine.
2. The EMV Core Polls to the Reader. In the meantime, the Host Application should instruct the Buyer or Shopper to tap the card.
3. Request the card from the buyer.
4. The shopper or buyer taps the card.
5. The Nayax EMV Reader Pulls the Response with the encrypted card data to the Nayax EVM Core.
6. Nayax EMV Core gets the data and sends it to the Nayax Servers to authorize the amount defined in Step 1.
7. Nayax Servers will return the authorized response containing the transaction ID and data.
8. Nayax EMV Core will use the event or callback to inform the host application that the transaction was completed, informing the transaction ID and transaction data.

<Note>
**Transaction Complete**

The transaction complete callback is used independently of the transaction result. Meaning that if the transaction was approved, declined, or expired due to timeout, the EMV Core will inform you that it was completed.

The host machine should check the transaction data to identify the transaction result and manage how to proceed.
</Note>

After receiving the transaction approved, the vendor can proceed with their selling flow. They can provide the product, start charging the vehicle, or perform any other operation. The vendor can also keep the transaction id and transaction data on their servers.

### Step 2: Settlement

The settlement step is when the final amount is defined and charged from the buyer's card. The settlement starts after the product is sold or the operation, such as EV charging, is completed. At this moment, the host machine can confirm the transactions. See the diagram Below:v

<Frame>![](images/docs/payment-with-authorization/images2.png)</Frame>

The detailed steps are described below:

1. The selling operation is concluded. For example, the product is delivered to the buyer.
2. The host application can report the sale to the application server.
3. The application server closes the operation section.
4. The Host application can now confirm the transaction. The [`ConfirmTransaction`](doc:payment-1#confirmtransaction) operation must be used to inform the transaction ID and the amount to be charged.

<Note>
**Authorized Amount**

The final amount can differ from the amount informed in the pre-authorization. To avoid problems, Nayax suggest using the maximum value at the authorization phase if the final amount related to your selling process may vary.
</Note>

5. Immediately, Nayax EMV Core will confirm and be responsible for the settlement process with the Nayax servers. However, it does not mean that the settlement process has been concluded.
6. EMV Core will use the Transaction ID and the amount to confirm the transaction and send them to Nayax servers.
7. Nayax servers will immediately return an acknowledgment confirmation to EMV Core. This is necessary to ensure EMV Core does not need to send the confirmation message again.

Nayax will handle the settlement transaction to ensure the funds are transferred correctly.

<Note>
**Canceling a transaction**

If you need to cancel a previously pre-authorized transactions, instead of the host application sends a confirm transaction operation to EMV Core, it need to sends a void operation.
</Note>



<br />