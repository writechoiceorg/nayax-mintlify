---
title: "Closed Loop Card Support"
---

SMC (Self-Managed Cards) is a Spark feature that enables integrators to utilize closed-loop cards, such as RFID tags, company-issued badges, or loyalty cards, within Spark's Remote/Device start flows and Device Stop flow. Rather than relying on Nayax or the acquiring bank to authorize the card, your system is responsible for validating and authorizing it. It is ideal when:

* You want to offer payment-free access (e.g., for employees or VIPs)
* You’re using a loyalty card or RFID solution already in place
* You don't need authorization from an external acquirer (no bank approval involved)

This enables greater flexibility for internal payment systems, free access programs, or custom logic-based validation.

<Note>
**Enabling SMC**

To support this feature, you must use a dedicated “Payment Method”. Machines supporting this Payment Method will able to support Spark Self-Managed cards and Credit Cards only (no additional Prepaid cards of different Providers).

Please ask your Nayax Integration Engineer for more information and configuration assistance
</Note>

## How SMC Works

When SMC is enabled:

* Spark treats all card taps as automatically authorized
* Your backend is expected to decide whether to proceed or cancel the session
* Spark still performs the normal callback flow (`TransactionCallback`,`TransactionNotify`, `StopNotify`)

This makes the card interaction fast and seamless while shifting responsibility to your backend to match card data against your internal system and decide whether to continue, cancel, or log the session.

## Card UID

The Payment card's Unique ID (Card UID) is a critical identifier for Spark self-managed cards. While Nayax automatically approves these cards, it's the integrator's responsibility to validate their authenticity and authorization for service. If an integrator determines a card is invalid or unauthorized, they must initiate a `/CancelTransaction` request.

<Warning>
**Card Validation**

If you don’t validate the card on your side, unauthorized users could start sessions. Always compare the `UID` data in the callback.
</Warning>

## Use Case Example

A typical SMC transaction would look like the following:

1. The card is detected and accepted by Spark.
2. Your backend receives a `/TransactionCallback `with card hash and UID.
3. You look up the badge in your internal employee system.
4. If approved, the session continues, and a `/Settlement` is sent later.
   1. If denied, your backend sends`/CancelTransaction`.

<Warning>
**Completion**

`/Settlement` is mandatory and will indicate a valid Spark Self-Managed card was presented.

`/CancelTransaction` is mandatory and will indicate an invalid card was presented or if the transaction is completed with no charge (no service provided / settlement=0).
</Warning>

## See Also

<HTMLBlock>
  {`
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    .card_container {
      display: flex;
      gap: 10px;
      margin: 0 auto;
      max-width: var(--container-lg);
      width: 100%;
      flex-wrap: wrap;

      .card {
        display: flex;
        padding: 20px 14px;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        min-width: 190px;
        flex-shrink: 0;
        gap: 12px;
        border-radius: 6px;
        border: 1px solid #DCDCDC;
        background: #FFF;
        box-shadow: 0px 3.656px 27.422px 0px rgba(0, 0, 0, 0.13);
        text-decoration: none;
        flex-grow: 1;
        flex-basis: 0;
        text-decoration: none !important;

        svg {
          fill: none;

          rect {
            fill: #FFF;
            stroke: #C9C9C9;
          }

          path {
            fill: #d2a900;
          }
        }

        h3 {
          color: #383838;
          text-align: center;
          font-family: Inter !important;
          font-size: 17.5px;
          font-style: normal;
          font-weight: 700;
          text-decoration: none;
          margin: 0;
          text-align: start;
        }
      }

      .card:hover {
        cursor: pointer;
        border: 1px solid #d2a900 !important;
        box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
        transform: translateY(-1px);

        svg {
          fill: none;

          rect {
            fill: #d2a900;
            stroke: #C9C9C9;
          }

          path {
            fill: #FFF;
          }
        }
      }
    }

    @media (prefers-color-scheme: dark) {
      [data-color-mode="system"] .card_container {
        .card {
          border: 1px solid #556974;
          background: #20292e;

          svg {
            rect {
              fill: #20292e;
              stroke: #556974;
            }
          }

          h3,
          p {
            color: #FFF;
          }
        }

        .card:hover {
          cursor: pointer;
          border: 1px solid #d2a900 !important;
          box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
          transform: translateY(-1px);

          h3 {
            color: #d2a900;
          }

          svg {
            fill: none;

            rect {
              fill: #d2a900;
              stroke: #556974;
            }

            path {
              fill: #20292e;
            }
          }
        }
      }
    }

    [data-color-mode="dark"] .card_container {
      .card {
        border: 1px solid #556974;
        background: #20292e;

        svg {
          rect {
            fill: #20292e;
            stroke: #556974;
          }
        }

        h3,
        p {
          color: #FFF;
        }
      }

      .card:hover {
        cursor: pointer;
        border: 1px solid #d2a900 !important;
        box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
        transform: translateY(-1px);

        h3 {
          color: #d2a900;
        }

        svg {
          fill: none;

          rect {
            fill: #d2a900;
            stroke: #556974;
          }

          path {
            fill: #20292e;
          }
        }
      }
    }

    @media only screen and (max-width: 450px) {
      .card_container {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }
  </style>

  <div class="card_container">

    <a class="card" href="/v1.0/docs/api-methods-spark">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>Api Methods</h3>
    </a>
    
    <div class="card_container">

     <a class="card" href="/v1.0/docs/transactioncallback">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>TransactionCallback</h3>
    </a>
      
       <a class="card" href="/v1.0/docs/settlement">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>Settlement</h3>
    </a>
      
      <a class="card" href="/v1.0/docs/canceltransaction">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>CancelTransaction</h3>
    </a>

  </div>
  `}
</HTMLBlock>