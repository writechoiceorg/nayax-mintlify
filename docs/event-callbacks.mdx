---
title: "Event Callbacks"
---

Event callbacks in the EMV Core SDK are event-driven mechanisms triggered by the SDK to notify the application when specific events occur during the transaction lifecycle. They enable developers to respond dynamically to changes in transaction status and system events. These callbacks provide real-time updates, ensuring seamless communication between the SDK and the application.

These are the available callbacks.

* [TransactionComplete](#transactioncomplete)
* [SystemStatusChanged](#systemstatuschanged)
* [ReaderMessageEvent](#readermessageevent)
* [CardTokenReceived](#cardtokenreceived)

You can read a more detailed description of each Callback event in the sections below.

## `TransactionComplete`

The `TransactionComplete ` is called by EMV-Core when the transaction is complete and either succeeds or fails. Contains the details required by the POS to print a receipt and to link transactions to sale events

```java
void TransactionComplete(AuthorizationDetails authorizationDetails);
```

<Note>
**In case of no response**

If EMV-Core doesn’t get an answer, it will re-send 2 times (for a total of 3 messages), and if it still doesn’t get an answer, it will assume the message received and will not cancel the transaction.
</Note>

Where:

<Table>
  <thead>
    <tr>
      <th>
        Parameter
      </th>

      <th>
        Description
      </th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        `errorDescription`
      </td>

      <td>
        A short technical description of the error is aimed at helping developers and tech support people identify the problem. It should not be presented to users.
      </td>
    </tr>

    <tr>
      <td>
        `errorCode`
      </td>

      <td>
        A numerical code describing the error if one occurs. See the table in the section below for details of each code.
      </td>
    </tr>

    <tr>
      <td>
        `status`
      </td>

      <td>
        Possible statuses:

        * OK
        * Declined
        * Error
        * Timeout
        * Cancelled
        * LocalCLP.
      </td>
    </tr>

    <tr>
      <td>
        `amountAuthorized`
      </td>

      <td>
        The amount approved for the transaction. The amount may be lower than the original request if it is a prepaid card.
      </td>
    </tr>

    <tr>
      <td>
        `amountRequested`
      </td>

      <td>
        Amount requested for transaction approval.
      </td>
    </tr>

    <tr>
      <td>
        `authorization_Code`
      </td>

      <td>
        PSP Transaction Identifier issued for approved transactions (EVO, Apriva, Traderoot).
      </td>
    </tr>

    <tr>
      <td>
        `partialPan`
      </td>

      <td>
        Masked PAN with the card account number's first six and last four digits.
      </td>
    </tr>

    <tr>
      <td>
        `cardType`
      </td>

      <td>
        Card scheme (MasterCard, Visa, Amex, etc.) or ‘Mifare’ in case of a closed loop.
      </td>
    </tr>

    <tr>
      <td>
        `authID`
      </td>

      <td>
        Approval Code from the processor (for some processors).
      </td>
    </tr>

    <tr>
      <td>
        `receiptID`
      </td>

      <td>
        Digital receipt ID in the PSP System.
      </td>
    </tr>

    <tr>
      <td>
        `transaction_Reference`
      </td>

      <td>
        Transaction reference. It should be used to confirm or void.
      </td>
    </tr>

    <tr>
      <td>
        `RRN`
      </td>

      <td>
        Processor reference number for approved transactions.
      </td>
    </tr>

    <tr>
      <td>
        `card_ID`
      </td>

      <td>
        Mifare UID in case of a Mifare card and `CLP_MIFARE_ENABLED=2`.
      </td>
    </tr>

    <tr>
      <td>
        `isTransactionApproved`
      </td>

      <td>
        Boolean indicating the transaction approval status.
      </td>
    </tr>

    <tr>
      <td>
        `CardToken`
      </td>

      <td>
        A token identifying the card. For payment cards, it returns a Base64 string. For closed-loop cards (e.g., Mifare), it returns the card UID.
      </td>
    </tr>

    <tr>
      <td>
        `Channel`
      </td>

      <td>
        Channel used for card reading (e.g., Contactless, Magstripe, Contact).
      </td>
    </tr>

    <tr>
      <td>
        `AID, TVR, IAD, TSI, ARC`
      </td>

      <td>
        Card/Transaction parameters that may be used for the receipt.
      </td>
    </tr>

    <tr>
      <td>
        `transactionTime`
      </td>

      <td>
        Transaction time.
      </td>
    </tr>

    <tr>
      <td>
        `application_Label`
      </td>

      <td>
        Card scheme (e.g., Visa, MasterCard, American Express).
      </td>
    </tr>

    <tr>
      <td>
        `currency`
      </td>

      <td>
        Currency code according to ISO 4217 code (e.g., 840 means $US).
      </td>
    </tr>

    <tr>
      <td>
        `CVM`
      </td>

      <td>
        Card Verification Method.
      </td>
    </tr>

    <tr>
      <td>
        `additional_Parameters`
      </td>

      <td>
        The payment processor sends optional additional parameters.
      </td>
    </tr>

    <tr>
      <td>
        `entryMode`
      </td>

      <td>

      </td>
    </tr>

    <tr>
      <td>
        `card_Balance`
      </td>

      <td>
        End-user card hash (NMI).
      </td>
    </tr>
  </tbody>
</Table>

### Error Codes

These are the possible error codes in the response:

| Error Type           | Error Code                            |
| -------------------- | ------------------------------------- |
| JsonParse            | -32700                                |
| General              | -1000                                 |
| Terminate            | -999                                  |
| Timeout              | -998                                  |
| Payment              | -997                                  |
| Reader Communication | -996                                  |
| Positive code        | Payment Service Provider (PSP) errors |

## `SystemStatusChanged`

The `SystemStatusChanged `event indicates changes in the SDKs or connected devices' operational state.

```java
void onTransactionComplete(TransactionResult result);
```

`SystemStatus` is an enumeration representing the current state of the system. See the possible result values in the table below:

| Result               | Description                                    |
| -------------------- | ---------------------------------------------- |
| `Ready`              | The SDK is ready for transactions.             |
| `NotReady`           | The SDK is not operational.                    |
| `PaymentTransaction` | A transaction is currently in progress.        |
| `Update`             | A firmware or configuration update is ongoing. |

## `ReaderMessageEvent`

The `ReaderMessageEvent `callback provides updates on user interface messages from the card reader.

```java
public ReaderMessage(int index, String line1, String line2)
```

Parameters:

| Parameter | Description                                                                                                   |
| :-------- | :------------------------------------------------------------------------------------------------------------ |
| `index`   | The index of the message. Decimal value according to the [Reader messages Index table](doc:reader-messages) . |
| `line1`   | Text is shown in the 1st line of the reader display.                                                          |
| `line2`   | Text is shown in the 2nd line of the reader display.                                                          |

<Warning>
**Reader Configuration**

For this feature to work, the reader must be configured to send External Display message events (Tag DF 46 with index 04).
</Warning>

## `CardTokenReceived`

The `CardTokenReceived `event is triggered after a card token is successfully retrieved.

```java
void CardTokenReceived(TokenDetails tokenDetails);
```

Where:

| Parameter      | Description                 |
| :------------- | :-------------------------- |
| `tokenDetails` | String with the Card token. |