---
title: "Create Payments"
---

Once the SDK is running and the connection with the Nayax device is established, the device is ready to handle vending and cashless transactions.

This guide shows you how to set up and manage cashless payment transactions from your peripheral's controller using the Nayax Marshall SDK.

## Pre-requisites

* Ensure your SDK is running and connected to the Nayax device indicated by the `onReady()` event.

<Warning>
**Integration**

If you have not finished the integration process, check the [Get Started](https://developerhub.nayax.com/docs/marshall-get-started)  page before continuing.
</Warning>

## Create a Payment

To perform a transaction using the Nayax Marshall SDK, follow the steps below.

1. Start by enabling the device for transactions.
   ```java
   ‚¶Å	m_vmc.vend.session_start(vmc_vend_t.session_type_credit_e);
   ```
   ```csharp
   ‚¶Å	vmc_instance.vend.session_start(vmc_vend_t.session_type_credit_e);
   ```
   ```c
   vmc_vend_session_start(vmc_vend_session_type_credit_e);
   ```
2. When a client presents a card and it is approved, the `onSessionBegin()` event is triggered.
   This is the signal for the peripheral, such as the vending machine, to prepare for payment approval.
   ```java
   m_sessions[0] = new vmc_vend_t.vend_session_t((short) 0, 1, (byte) 0, 10);
   //the fields are (from left to right): produce code (2 bytes long,meaning value up to 65535), quantity (2 byte), unit of measure (1 byte), price (2 bytes, meaning value up to 65535)
   ```
   ```csharp
   List<vmc_vend_t.vend_item_t> list = new List<vmc_vend_t.vend_item_t> ();
   list.Add(new vmc_vend_t.vend_item_t(0, 10, 1, 1));
   //the fields are (from left to right): produce code (2 bytes long,meaning value up to 65535), price (2 bytes, meaning value up to 65535), quantity (2 bytes), unit of measure (1 byte), .
   session = new vmc_vend_t.vend_session_t(list);
   ```
   ```c
   session_product.code = 1;
   session_product .qty = 1;
   session_product.price = 10;
   session_product.unit = 1;
   session->products = &session_product;
   session->total_products = 1;
   ```
   <br />
<Warning>
**Price field**

The price field is set as an integer, meaning it does not take into consideration the Decimal Place: the actual price is calculated by the device based on the Decimal place- meaning if you set a price of 50 in the SDK, the peripherla would send a price of 50 to the device, who would look at it's own Decimal Place setting and would multiply the price sent by 10^(-decimal place). Meaning if the device has a Decimal Place of 2, the actual price the device would attempt to charge the consumer would be 0.50.\
More on that on [Decimal Place](https://developerhub.nayax.com/docs/faq#decimal-place).

This means that in case of the device is using a Decimal Place of 2, the highest price would be 655.35 (0XFFFF with decimal of 2)
</Warning>
   <br />

<br />

<Note>
**Multi-vend Session**

For a multi-vend session , when the consumer is able to select multiple items in one transaction, enable the `multi_vend_support` flag. The session would then include a list of products.\
You can review an example of it in the demo apps.
</Note>

Then, inside the onSessionBegin() callback you would send the "Vend Request" for said session (transaction):

<Callout icon="üìò" theme="info">
  ```java
  m_vmc.vend.vend_request(m_sessions[m_active_session]);
  ```

  ```csharp
  vmc_instance.vend.vend_request(session);
  ```

  ```c
  vmc_vend_vend_request(session);
  ```
</Callout>

3. After the VPOS approves the vending request, the peripheral must notify the SDK that the product has been successfully delivered to the consumer. This is done by implementing the `onVendApproved(...)`API and returning one of the following:

* **`True`** : If the vend process is successful, the client's credit card is charged the requested amount.
* **`False `**: For a failed vend process.

4. Whether it‚Äôs a single session or multi-session, the `onReady()` event will be called upon finishing the vending process, indicating that the device is ready for the next transaction.

<Note>
**Multi-Session**

For multi-session configurations, when the session on the peripheral's end is finished, it is up for the peripheral to close the session in order for the transaction to be settled:

```java
m_vmc.vend.session_close(m_session)
```

```csharp
m_vend_machine.vend.session_close(m_vend_machine.session)
```

```c
vmc_vend_session_close(session)
```
</Note>

Following these steps ensures that the vending process, from card presentation to product delivery and payment, is handled efficiently and securely using the Nayax Marshall SDK.

## See Also

<HTMLBlock>
  {`
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');

    .card_container {
      display: flex;
      gap: 10px;
      margin: 0 auto;
      max-width: var(--container-lg);
      width: 100%;
      flex-wrap: wrap;

      .card {
        display: flex;
        padding: 20px 14px;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        min-width: 190px;
        flex-shrink: 0;
        gap: 12px;
        border-radius: 6px;
        border: 1px solid #DCDCDC;
        background: #FFF;
        box-shadow: 0px 3.656px 27.422px 0px rgba(0, 0, 0, 0.13);
        text-decoration: none;
        flex-grow: 1;
        flex-basis: 0;
        text-decoration: none !important;

        svg {
          fill: none;

          rect {
            fill: #FFF;
            stroke: #C9C9C9;
          }

          path {
            fill: #d2a900;
          }
        }

        h3 {
          color: #383838;
          text-align: center;
          font-family: Inter !important;
          font-size: 15px;
          font-style: normal;
          font-weight: 700;
          text-decoration: none;
          margin: 0;
          text-align: start;
        }
      }

      .card:hover {
        cursor: pointer;
        border: 1px solid #d2a900 !important;
        box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
        transform: translateY(-1px);

        svg {
          fill: none;

          rect {
            fill: #d2a900;
            stroke: #C9C9C9;
          }

          path {
            fill: #FFF;
          }
        }
      }
    }

    @media (prefers-color-scheme: dark) {
      [data-color-mode="system"] .card_container {
        .card {
          border: 1px solid #556974;
          background: #20292e;

          svg {
            rect {
              fill: #20292e;
              stroke: #556974;
            }
          }

          h3,
          p {
            color: #FFF;
          }
        }

        .card:hover {
          cursor: pointer;
          border: 1px solid #d2a900 !important;
          box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
          transform: translateY(-1px);

          h3 {
            color: #d2a900;
          }

          svg {
            fill: none;

            rect {
              fill: #d2a900;
              stroke: #556974;
            }

            path {
              fill: #20292e;
            }
          }
        }
      }
    }

    [data-color-mode="dark"] .card_container {
      .card {
        border: 1px solid #556974;
        background: #20292e;

        svg {
          rect {
            fill: #20292e;
            stroke: #556974;
          }
        }

        h3,
        p {
          color: #FFF;
        }
      }

      .card:hover {
        cursor: pointer;
        border: 1px solid #d2a900 !important;
        box-shadow: 0px 4px 30px 0px rgba(0, 0, 0, 0.13);
        transform: translateY(-1px);

        h3 {
          color: #d2a900;
        }

        svg {
          fill: none;

          rect {
            fill: #d2a900;
            stroke: #556974;
          }

          path {
            fill: #20292e;
          }
        }
      }
    }

    @media only screen and (max-width: 450px) {
      .card_container {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      }
    }
  </style>

  <div class="card_container">

    <a class="card" href="/v1.0/docs/marshall-get-started">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>Get Started</h3>
    </a>

    <a class="card" href="/v1.0/docs/marshall-methods-and-functions">
      <svg xmlns="http://www.w3.org/2000/svg" width="33" height="33" viewBox="0 0 33 33">
        <rect x="0.5" y="0.5" width="31.8205" height="31.8205" rx="3.70776" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M23.3736 24.9994C22.4754 24.9994 21.7472 24.2712 21.7472 23.373V11.2526L9.62638 11.2526C8.72816 11.2526 8 10.5245 8 9.62632C8 8.72813 8.72816 8 9.62639 8L23.3736 8C24.2718 8 25 8.72813 25 9.62632L25 23.373C25 24.2712 24.2718 24.9994 23.3736 24.9994Z" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M22.8056 10.1953C23.4408 10.8304 23.4408 11.8602 22.8056 12.4953L10.7768 24.5237C10.1416 25.1588 9.11188 25.1588 8.47674 24.5237C7.84159 23.8885 7.84159 22.8588 8.47673 22.2237L20.5056 10.1953C21.1407 9.56019 22.1705 9.56019 22.8056 10.1953Z" />
      </svg>
      <h3>Methods & Functions</h3>
    </a>
      </div>
  `}
</HTMLBlock>