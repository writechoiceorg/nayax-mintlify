---
title: "Create Payments"
---

Once the SDK is running and the connection with the Nayax device is established, the device is ready to handle vending and cashless transactions.

This guide shows you how to set up and manage cashless payment transactions from your peripheral's controller using the Nayax Marshall SDK.

## Pre-requisites

* Ensure your SDK is running and connected to the Nayax device indicated by the `onReady()` event.

<Warning>
**Integration**

If you have not finished the integration process, check the [Get Started](doc:marshall-get-started)  page before continuing.
</Warning>

## Create a Payment

To perform a transaction using the Nayax Marshall SDK, follow the steps below.

1. Start by enabling the device for transactions.
   ```java
   â¦	m_vmc.vend.session_start(vmc_vend_t.session_type_credit_e);
   ```
   ```csharp
   â¦	vmc_instance.vend.session_start(vmc_vend_t.session_type_credit_e);
   ```
   ```c
   vmc_vend_session_start(vmc_vend_session_type_credit_e);
   ```
2. When a client presents a card and it is approved, the `onSessionBegin()` event is triggered.
   This is the signal for the peripheral, such as the vending machine, to prepare for payment approval.
   ```java
   m_session = new vmc_vend_t.vend_session_t(2000, 1, (byte) 0, 10);
   ```
   ```csharp
   m_vend_machine.session = new vmc_vend_t.vend_session_t(2000, 1, (byte) 0, 10);
   ```
   ```c
   session_product.code = 1;
   session_product .qty = 1;
   session_product.price = 10;
   session_product.unit = 1;
   session->products = &session_product;
   session->total_products = 1;
   ```
<Note>
**Multi-vend Session**

For a multi-vend session , when the consumer is able to select multiple items in one transaction, enable the `multi_vend_support` flag. The session would then include a list of products.
</Note>

Then you would send the "Vend Request" for said session (transaction):

<Callout icon="ðŸ“˜" theme="info">
  ```java
  m_vmc.vend.vend_request(m_session);
  ```
  ```csharp
  m_vend_machine.vmc_instance .vend.vend_request(m_vend_machine .m_session);
  ```
  ```c
  vmc_vend_vend_request(session);
  ```
</Callout>

3. After the VPOS approves the vending request, the peripheral must notify the SDK that the product has been successfully delivered to the consumer. This is done by implementing the `onVendApproved(...)`API and returning one of the following:

* **`True`** : If the vend process is successful, the client's credit card is charged the requested amount.
* **`False `**: For a failed vend process.

4. Whether itâ€™s a single session or multi-session, the `onReady()` event will be called upon finishing the vending process, indicating that the device is ready for the next transaction.

<Note>
**Multi-Session**

For multi-session configurations, when the session on the peripheral's end is finished, it is up for the peripheral to close the session in order for the transaction to be settled:

```java
m_vmc.vend.session_close(m_session)
```
```csharp
m_vend_machine.vend.session_close(m_vend_machine.session)
```
```c
vmc_vend_session_close(session)
```
</Note>

Following these steps ensures that the vending process, from card presentation to product delivery and payment, is handled efficiently and securely using the Nayax Marshall SDK.

## See Also

<CardGroup cols={2}>
  <Card title="Get Started" href="/v1.0/docs/marshall-get-started" icon="arrow-up-right" />
  <Card title="Methods & Functions" href="/v1.0/docs/marshall-methods-and-functions" icon="arrow-up-right" />
</CardGroup>