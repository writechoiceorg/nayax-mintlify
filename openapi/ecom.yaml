openapi: 3.0.1
info:
  title: Nayax Ecom SDK API
  version: v1
  description: >-
    This OpenAPI specification describes the Nayax SDK API, designed to
    facilitate e-commerce transactions, including initialization, payment
    processing, and card token management. It supports various transaction types
    such as Customer-Initiated Transactions (CIT), Merchant-Initiated
    Transactions (MIT), and Card-on-File (COF) operations. The API focuses on
    secure authentication, efficient transaction flows, and real-time status
    updates, with robust error handling and logging capabilities.
servers:
  - url: https://api.nayax.com/sdk
    description: Production Nayax SDK API
security:
  - BearerAuth: []
tags:
  - name: Payments
    description: Operations related to the Nayax SDK API for e-commerce transactions.
  - name: Testing
    description: Endpoints for testing connectivity.
paths:
  /initialize:
    post:
      x-mint:
        content: |
          Initiates an e-commerce transaction by sending a request to the Nayax Ecom SDK. This call is the beginning of a transaction and requests a payment page or prepares for a token-based charge. It supports various entry modes like ECOM, COF, or MOTO.

          **Authentication:** The request requires a JWT RSA token in the header for authentication of both VAS integrator and VAS ECOM provider. 
          
          **Timeout Recommendation:** It is highly recommended to implement a timeout of 60 seconds on the client side. If no callback or response is received, retry the same `/InitializeTransaction` request. The `EcomTransactionId` is valid for 5 minutes from the `/StartAuthentication` response.

          Initiates an e-commerce transaction by sending a request to the Nayax Ecom SDK. This call initiates a transaction and either displays a payment page or prepares for a token-based charge.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:
            
            * `https://stable-sdk-api.nayax.com/initialize`
          </Note>
      tags:
        - Payments
      summary: Initialize an E-commerce Transaction
      requestBody:
        description: Request to initialize a new transaction.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitializeRequest'
            examples:
              initializeRequestExample:
                summary: Example Initialize Request
                value:
                  basicInfo:
                    sessionExpiration: '2025-12-31T23:59:59Z'
                    redirectURL: https://your-merchant.com/callback
                    amount: 15
                    currency: USD
                    countryCode: US
                    requestType: 0
                    entryMode: 0
                    tokenModel: 0
                    platform: 0
                    isStoredCard: false
                    merchantRequestId: MERCHANT_REQ_12345
                  machineInfo:
                    machineId: '0434334921100366'
                  cardHolderInfo:
                    cardholderCountry: US
                    paymentPageLan: en
                    cardholderEmail: test@example.com
                    cardHolderUniqId: unique_customer_id_123
                  additionalInfo:
                    additionalData: '{"channel": "iOS", "someOtherData": "value"}'
                    additionalReceiptData: >-
                      [{"key":"orderId",
                      "value":"ORD98765"},{"key":"customerLoyalty",
                      "value":"GOLD"}]
                  validationKey: >-
                    X305dITNTAw2vHsxE+taVcn6UvgBC3fdI6QbqeABgHbo8CKsoZhqISJfslehCiA+L7XYrqvKFci7C6BNj/trBuNJwBEjgBzKhhgpJ5ggnw=
                  browserInfo: >-
                    Mozilla/5.0 (iPhone; CPU iPhone OS 13_5 like Mac OS X)
                    AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1.1
                    Mobile/15E148 Safari/604.1
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitializeResponse'
              examples:
                initializeResponseApproved:
                  summary: Example Initialize Response (Approved)
                  value:
                    status:
                      verdict: Approved
                      code: 0
                      statusMessage: Transaction initialized successfully.
                    paymentInfo:
                      amount: 15
                      currency: USD
                      nayaxTokenId: NAYAXTOK12345
                      siteId: 1
                      decimalPlace: 2
                    sessionInfo:
                      nayaxSessionId: ABCDEF123456
                      expirationDate: '2025-12-31T23:59:59Z'
                      additionalSessionData: '{"providerData": "some_session_info"}'
                    appInfo:
                      billingProviderId: 1
                      appVersion: 1.0.0
                initializeResponseDeclined:
                  summary: Example Initialize Response (Declined)
                  value:
                    status:
                      verdict: Declined
                      code: 998
                      statusMessage: 'Validation error: Missing mandatory field.'
                    paymentInfo:
                      amount: null
                      currency: null
                      nayaxTokenId: null
                      siteId: null
                      decimalPlace: null
                    sessionInfo:
                      nayaxSessionId: null
                      expirationDate: null
                      additionalSessionData: null
                    appInfo:
                      billingProviderId: null
                      appVersion: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                unauthorized:
                  summary: Unauthorized Example
                  value:
                    verdict: Declined
                    code: 980
                    statusMessage: Unauthorized - Authentication failed.
  /charge-token:
    post:
      x-mint:
        content: |
          Processes a payment using a previously saved card token. This endpoint is primarily used for recurring payments (MIT or CIT transactions).

          **Important:** This endpoint might be exposed server-to-server for two-step flows, potentially requiring changes in authentication mechanisms. Recurring payment calls will originate from the server only. Fiscalization and eReceipt processes should also be operated during this flow.

          /\*! tailwindcss v4.1.17 | MIT License | https: //tailwindcss.com \*/ @layer theme, base, components, utilities; @layer utilities;

          Processes a payment using a previously saved card token. This endpoint is primarily used for recurring payments (MIT or CIT transactions).

          This endpoint may be exposed server-to-server for two-factor authentication flows, potentially requiring changes to authentication mechanisms. Recurring payment calls will originate from the server only. Fiscalization and eReceipt processes should also be operated during this flow.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:

            * `https: //stable-sdk-api.nayax.com/charge-token`
          </Note>
      tags:
        - Payments
      summary: Process Payment with a Card Token (Charge Token)
      description: >-
        Processes a payment using a previously saved card token. This endpoint
        is primarily used for recurring payments (MIT or CIT transactions).


        **Important:** This endpoint might be exposed server-to-server for
        two-step flows, potentially requiring changes in authentication
        mechanisms. Recurring payment calls will originate from the server only.
        Fiscalization and eReceipt processes should also be operated during this
        flow.
      requestBody:
        description: Request to charge a saved token for a payment.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionRequest'
            examples:
              chargeTokenRequestMIT:
                summary: Example Charge Token Request (MIT)
                value:
                  basicInfo:
                    amount: 25.5
                    currency: EUR
                    countryCode: DE
                    requestType: 0
                    entryMode: 1
                    tokenModel: 1
                    cvc: null
                    token: NAYAXTOK12345
                    merchantRequestId: MERCHANT_MIT_001
                    transactionId: null
                    transactionTimeUtc: null
                    isSaveTokenWithoutConsent: false
                  machineInfo:
                    machineId: '0434334921100366'
                  cardHolderInfo:
                    cardholderEmail: customer@example.com
                    cardHolderUniqId: unique_customer_id_123
                  additionalInfo:
                    additionalData: '{"loyaltyPoints": 100}'
                    additionalReceiptData: '[{"key":"product", "value":"Premium Service"}]'
                  validationKey: AUTH_VALID_KEY_XYZ
              chargeTokenRequestCIT:
                summary: Example Charge Token Request (CIT)
                value:
                  basicInfo:
                    amount: 10
                    currency: GBP
                    countryCode: UK
                    requestType: 0
                    entryMode: 2
                    tokenModel: 2
                    cvc: 123
                    token: NAYAXTOK67890
                    merchantRequestId: MERCHANT_CIT_002
                    transactionId: null
                    transactionTimeUtc: null
                    isSaveTokenWithoutConsent: false
                  machineInfo:
                    machineId: '0434334921100367'
                  cardHolderInfo:
                    cardholderEmail: customer2@example.com
                    cardHolderUniqId: unique_customer_id_456
                  additionalInfo:
                    additionalData: '{"discountCode": "SAVE10"}'
                    additionalReceiptData: '[{"key":"item", "value":"Book A"}]'
                  validationKey: AUTH_VALID_KEY_ABC
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionResponse'
              examples:
                chargeTokenResponseApproved:
                  summary: Example Charge Token Response (Approved)
                  value:
                    status:
                      verdict: Approved
                      code: 0
                      statusMessage: Payment processed successfully.
                    basicInfo:
                      amount: 25.5
                      currency: EUR
                      merchantRequestId: MERCHANT_MIT_001
                      transactionId: NAYAXTRANS98765
                      transactionTimeUtc: '2025-08-28T10:30:00Z'
                    paymentInfo:
                      amount: 25.5
                      currency: EUR
                      nayaxTokenId: NAYAXTOK12345
                      siteId: 1
                      providerTransactionId: PSP_TRANS_ABC
                      decimalPlace: 2
                chargeTokenResponseDeclined:
                  summary: Example Charge Token Response (Declined)
                  value:
                    status:
                      verdict: Declined
                      code: 981
                      statusMessage: Unauthorized – Machine is not active.
                    basicInfo:
                      amount: 10
                      currency: GBP
                      merchantRequestId: MERCHANT_CIT_002
                      transactionId: null
                      transactionTimeUtc: null
                    paymentInfo:
                      amount: null
                      currency: null
                      nayaxTokenId: null
                      siteId: null
                      providerTransactionId: null
                      decimalPlace: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                unauthorized:
                  summary: Unauthorized Example
                  value:
                    verdict: Declined
                    code: 980
                    statusMessage: Unauthorized - Authentication failed.
  /get-card-token:
    post:
      x-mint:
        content: |
          Retrieves essential data for a given card token, including the last four digits, expiration date, card brand, and token status.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:
            
            * `https://stable-sdk-api.nayax.com/initialize`
          </Note>
      tags:
        - Payments
      summary: Retrieve Card Token Data
      requestBody:
        description: Request to get details for a specific card token.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRequest'
            examples:
              getTokenRequest:
                summary: Example Get Token Request
                value:
                  basicInfo:
                    merchantRequestId: REQ_GETTOKEN_001
                  machineInfo:
                    machineId: '0434334921100366'
                  cardHolderInfo:
                    cardHolderUniqId: unique_customer_id_123
                  tokenInfo:
                    nayaxTokenId: NAYAXTOK12345
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
              examples:
                getTokenResponseApproved:
                  summary: Example Get Token Response (Approved)
                  value:
                    status:
                      verdict: Approved
                      code: 0
                      statusMessage: Card token data retrieved successfully.
                    tokenInfo:
                      nayaxTokenId: NAYAXTOK12345
                      cardBin: '411111'
                      cardFinalDigits: '1111'
                      expiryDate: 12/2025
                      brand: VISA
                      tokenStatus: 0
                      actorId: 116383
                getTokenResponseDeclined:
                  summary: Example Get Token Response (Declined)
                  value:
                    status:
                      verdict: Declined
                      code: 601
                      statusMessage: Card token is not valid.
                    tokenInfo: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
  /delete-token:
    post:
      x-mint:
        content: |
          Deletes a specified card token from the system. An alternative approach is to set an expiry date on the token and only delete the PSP token.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:
            
            * `https://stable-sdk-api.nayax.com/initialize`
          </Note>
      tags:
        - Payments
      summary: Delete a Card Token
      requestBody:
        description: Request to delete a card token.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenRequest'
            examples:
              deleteTokenRequest:
                summary: Example Delete Token Request
                value:
                  basicInfo:
                    merchantRequestId: REQ_DELTOKEN_001
                  machineInfo:
                    machineId: '0434334921100366'
                  cardHolderInfo:
                    cardHolderUniqId: unique_customer_id_123
                  tokenInfo:
                    nayaxTokenId: NAYAXTOK12345
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
              examples:
                deleteTokenResponseApproved:
                  summary: Example Delete Token Response (Approved)
                  value:
                    status:
                      verdict: Approved
                      code: 0
                      statusMessage: Card token deleted successfully.
                    tokenInfo: null
                deleteTokenResponseDeclined:
                  summary: Example Delete Token Response (Declined)
                  value:
                    status:
                      verdict: Declined
                      code: 601
                      statusMessage: Card token is not valid.
                    tokenInfo: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
  /get-transaction-by-session:
    post:
      x-mint:
        content: |
          Retrieves the transaction status and other relevant details, including the receipt URL, using a session ID.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:
            
            * `https://stable-sdk-api.nayax.com/get-transaction-by-session`
          </Note>
      tags:
        - Payments
      summary: Retrieve Transaction Status by Session ID
      description: >-
        Retrieves the transaction status and other relevant details, including
        the receipt URL, using a session ID.
      requestBody:
        description: Request to get transaction details by session ID.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TransactionStatusRequest'
            examples:
              getTransactionStatusRequest:
                summary: Example Get Transaction Status Request
                value:
                  basicInfo:
                    merchantRequestId: REQ_GETTRANS_001
                  machineInfo:
                    machineId: '0434334921100366'
                  sessionInfo:
                    nayaxSessionId: ABCDEF123456
                  transactionIdentifyerType: 0
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TransactionStatusResponse'
              examples:
                getTransactionStatusResponseApproved:
                  summary: Example Get Transaction Status Response (Approved)
                  value:
                    status:
                      verdict: Approved
                      code: 0
                      statusMessage: Transaction retrieved successfully.
                    externalTransactionStatus: 12
                getTransactionStatusResponseDeclined:
                  summary: Example Get Transaction Status Response (Declined)
                  value:
                    status:
                      verdict: Declined
                      code: 603
                      statusMessage: Transaction not found.
                    externalTransactionStatus: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
  /validate-merchant:
    post:
      tags:
        - Payments
      summary: Validate Merchant (Start Authentication)
      x-mint:
        content: |
          An initial call by Nayax to the Integrator to securely authenticate both
          Nayax and the 3rd party regarding a possible transaction. During this
          process, the integrator generates a Transaction ID ("Ecom Transaction
          ID") to be echoed in following calls.

          **Security Flow:**

          1. Nayax and the integrator pre-share a Secret Token (e.g.,
          `mrV3U3nsgGFrE3w5-wnBo_WCLPce-pZ1awRvTVTkungMIKThTVbj_fiXdfoGclhn0` with
          `Token ID: 116383`).

          2. Nayax creates a 27-character Random String and sends it to the
          Integrator in the `StartAuthentication` request (e.g.,
          `123456789qwertyuiopasdfghjk`).

          3. The Integrator generates a 64-character Ciphertext with the structure
          `Ecom Transaction ID`||`=`||`Random String` (e.g.,
          `12c7cec2-c690-4425-9a1f-db0db60e2d8c=123456789qwertyuiopasdfghjk`).

          4. The Integrator produces an encryption key from the 32 rightmost
          characters of the Token (e.g., `wRvTVTkungMIKThTVbj_fiXdfoGclhn0`).

          5. The Integrator encrypts the Ciphertext using AES in ECB mode and
          sends the produced cipher in the `/validate-merchant`
          (StartAuthentication) Request.

          6. Nayax decrypts the Cipher using the same key and performs validations
          on the `Random` and `Cipher Format`.

          7. Nayax and the Integrator should send the Ecom Transaction ID
          (`12c7cec2-c690-4425-9a1f-db0db60e2d8c`) in all future API calls of the
          same transaction.

          8. The Integrator shall validate that the Ecom Transaction ID sent from
          Nayax was generated by them in further API calls.

          See [Security & Authentication](/docs/ecom-sdk-security-authentication) for more details.

          <Note>
            **Integration URL**

            When performing your integration to the API use the stable URL, such as:
            
            * `https://stable-sdk-api.nayax.com/validate-merchant`
          </Note>
      requestBody:
        description: Request to validate the merchant and initiate authentication.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateMerchantRequest'
            examples:
              validateMerchantRequest:
                summary: Example Validate Merchant Request
                value:
                  tokenId: 116383
                  actorId: someActorId
                  machineId: '0434334921100366'
                  random: 123456789qwertyui
                  cipher: >-
                    X305dITNTAw2vHsxE+taVcn6UvgBC3fdI6QbqeABgHbo8CKsoZhqISJfslehCiA+L7XYrqvKFci7C6BNj/trBuNJwBEjgBzKhhgpJ5ggnw=
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                validateMerchantResponseApproved:
                  summary: Example Validate Merchant Response (Approved)
                  value:
                    verdict: Approved
                    code: 0
                    statusMessage: Merchant authenticated successfully.
                    customDeclineCode: >-
                      9515af0d6b5c328b6383ff241fa7b03e489d6285a8db6a4f0d8369e3f044e8d7
                validateMerchantResponseDeclined:
                  summary: Example Validate Merchant Response (Declined)
                  value:
                    verdict: Declined
                    code: 33
                    statusMessage: Fail to Authenticate
                    customDeclineCode: null
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                badRequest:
                  summary: Bad Request Example
                  value:
                    verdict: Declined
                    code: 997
                    statusMessage: Did not receive mandatory parameters.
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
              examples:
                unauthorized:
                  summary: Unauthorized Example
                  value:
                    verdict: Declined
                    code: 984
                    statusMessage: Unauthorized – Token is not valid.
  /test/connection:
    get:
      tags:
        - Testing
      summary: Test API Connection
      x-mint:
        content: A simple endpoint to test if the API is reachable.
      responses:
        '200':
          description: Success
          content:
            text/plain:
              schema:
                type: string
              examples:
                testConnectionResponse:
                  summary: Example Test Connection Response
                  value: Connection Successful
  /initialize-1: {}
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: >-
        JWT RSA token required for authentication. The token should be included
        in the `Authorization` header as `Bearer <token>`.

        Nayax will issue tokens to the VAS, signed by a private key, and decrypt
        them using a public key.
  schemas:
    AdditionalInfo:
      type: object
      description: Additional data related to the transaction.
      properties:
        additionalData:
          type: string
          nullable: true
          description: >-
            Optional additional data in JSON format for the channel (iOS,
            Android, Web).
          example: '{"channel": "iOS", "campaignId": "XYZ789"}'
        additionalReceiptData:
          type: string
          nullable: true
          description: >-
            Optional additional data that the integrator wishes to be displayed
            in the eReceipt (new Weezmo eReceipt).
          example: >-
            [{"key":"productCode", "value":"PROD001"}, {"key":"customerRating",
            "value":"5_STARS"}]
      additionalProperties: false
    AppInfo:
      type: object
      description: Information about the application or billing provider.
      properties:
        providerCredentials:
          type: object
          additionalProperties:
            type: string
          nullable: true
          description: Credentials for the billing provider.
          example:
            apiKey: some_api_key
            apiSecret: some_api_secret
        billingProviderId:
          type: integer
          format: int32
          nullable: true
          description: Unique ID of the billing provider.
          example: 1
        appVersion:
          type: string
          nullable: true
          description: Version of the application.
          example: 1.0.0
      additionalProperties: false
    BasicInfo:
      type: object
      description: Basic information for a transaction.
      properties:
        sessionExpiration:
          type: string
          format: date-time
          nullable: true
          description: Session expiration date and time.
          example: '2025-12-31T23:59:59Z'
        redirectURL:
          type: string
          nullable: true
          description: URL where the shopper should be redirected after a redirection flow.
          example: https://your-merchant.com/callback
        amount:
          type: number
          format: double
          nullable: true
          description: Transaction amount.
          example: 15
        currency:
          type: string
          nullable: true
          minLength: 3
          maxLength: 3
          description: The three-character ISO currency code according to ISO4217.
          example: USD
        countryCode:
          type: string
          nullable: true
          description: Country code according to ISO 3166.
          example: US
        requestType:
          $ref: '#/components/schemas/RequestType'
          description: Session transaction type.
          example: 0
        entryMode:
          $ref: '#/components/schemas/EntryMode'
          description: |-
            Indicates the point-of-sale entry mode.
            For Initialize requests, values may be ECOM, COF or MOTO.
            For Payment requests, values may be MIT or CIT.
          example: 0
        tokenModel:
          $ref: '#/components/schemas/TokenModel'
          description: >-
            Conditional (mandatory if EntryMode is COF). Indicates the desired
            token model. **Note on Token Behaviour**: A token's type
            (subscription/COF/top-up) is set during its initial creation and
            stored in our system. If a subsequent [Charge
            Token](ref:post_charge-token) request includes a different token
            type parameter, it is ignored. The system always uses the original
            token type from the initialization request, regardless of what is
            provided in later charge requests.
          example: 0
        platform:
          $ref: '#/components/schemas/Platform'
          description: >-
            The platform from which the request originated (e.g., iOS, Android,
            Web).
          example: 0
        isStoredCard:
          type: boolean
          nullable: true
          description: Optional. Cardholder approval for card saving.
          example: true
        cvc:
          type: integer
          format: int32
          nullable: true
          description: Optional (for CIT only). Secure code for transaction verification.
          example: 123
        token:
          type: string
          nullable: true
          description: >-
            Conditional (mandatory if EntryMode is MIT or CIT). Saved Card token
            (Nayax token ID).
          example: NAYAXTOK12345
        merchantRequestId:
          type: string
          nullable: true
          description: >-
            The actor's/integrator's transaction ID. Will be passed as
            "MerchantTranId" in the SDK.
          example: MERCHANT_REQ_12345
        transactionId:
          type: string
          nullable: true
          description: >-
            Conditional Nayax Transaction Identifier, required for second-step
            transactions (Refund etc.).
          example: NAYAXTRANS98765
        transactionTimeUtc:
          type: string
          format: date-time
          nullable: true
          description: >-
            Conditional. Nayax Transaction Identifier for second-step
            transactions (Refund etc.).
          example: '2025-08-28T10:30:00Z'
        isSaveTokenWithoutConsent:
          type: boolean
          nullable: true
          description: >-
            Indicates if the token should be saved without explicit cardholder
            consent.
          example: false
      additionalProperties: false
      required:
        - amount
        - countryCode
        - requestType
        - entryMode
        - sessionExpiration
        - redirectURL
    CardHolderInfo:
      type: object
      description: Information about the cardholder.
      properties:
        cardholderCountry:
          type: string
          nullable: true
          description: Optional. Country of the cardholder.
          example: US
        paymentPageLan:
          type: string
          nullable: true
          description: Optional. Language for the payment page.
          example: en
        cardholderEmail:
          type: string
          nullable: true
          description: >-
            Optional (conditional - if COF, mandatory). Cardholder's email
            address. One of `cardholderEmail` or `cardHolderUniqId` needs to be
            provided.
          example: john.doe@example.com
        cardHolderUniqId:
          type: string
          nullable: true
          description: >-
            Optional (conditional - if MIT/CIT, mandatory). Unique identifier
            for the cardholder. One of `cardholderEmail` or `cardHolderUniqId`
            needs to be provided.
          example: unique_customer_id_123
        brand:
          type: string
          nullable: true
          description: The brand of the card (e.g., VISA, MASTERCARD).
          example: VISA
      additionalProperties: false
    EntryMode:
      type: integer
      format: int32
      description: Indicates the point-of-sale entry mode.
      enum:
        - 0
        - 1
        - 2
        - 3
        - 4
      x-enum-varnames:
        - ECOM
        - MIT
        - CIT
        - COF
        - MOTO
    ExternalTransactionStatus:
      type: integer
      format: int32
      description: External transaction status codes from the billing provider.
      enum:
        - 12
        - 19
        - 22
        - 53
        - 62
        - 64
        - 113
        - 250
        - 5000
        - 5001
        - 5002
      x-enum-varnames:
        - Approved
        - PartialApproval
        - Declined
        - Pending
        - Voided
        - Refunded
        - Cancelled
        - GeneralDecline
        - ProviderError
        - Timeout
        - UnknownStatus
    InitializeRequest:
      type: object
      description: Request body for initializing a new transaction.
      properties:
        basicInfo:
          $ref: '#/components/schemas/BasicInfo'
          description: Basic transaction details.
        machineInfo:
          $ref: '#/components/schemas/MachineInfo'
          description: Information about the machine/terminal.
        validationKey:
          type: string
          nullable: true
          description: The result of the authentication flow (from `/validate-merchant`).
          example: >-
            X305dITNTAw2vHsxE+taVcn6UvgBC3fdI6QbqeABgHbo8CKsoZhqISJfslehCiA+L7XYrqvKFci7C6BNj/trBuNJwBEjgBzKhhgpJ5ggnw=
        cardHolderInfo:
          $ref: '#/components/schemas/CardHolderInfo'
          description: Cardholder details.
        additionalInfo:
          $ref: '#/components/schemas/AdditionalInfo'
          description: Additional information for the transaction and receipt.
        browserInfo:
          type: string
          nullable: true
          description: Browser information (user-agent string) for payment page rendering.
          example: >-
            Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,
            like Gecko) Chrome/100.0.4896.88 Safari/537.36
      additionalProperties: false
    InitializeResponse:
      type: object
      description: Response body for initializing a new transaction.
      properties:
        status:
          $ref: '#/components/schemas/Status'
          description: Transaction status.
        paymentInfo:
          $ref: '#/components/schemas/PaymentInfo'
          description: Payment-related information.
        sessionInfo:
          $ref: '#/components/schemas/SessionInfo'
          description: Session-related information.
        appInfo:
          $ref: '#/components/schemas/AppInfo'
          description: Application and billing provider information.
      additionalProperties: false
    MachineInfo:
      type: object
      description: Information about the machine or terminal.
      properties:
        machineId:
          type: string
          nullable: true
          description: Machine entity unique ID allocated in the Nayax Backoffice.
          example: '0434334921100366'
      additionalProperties: false
      required:
        - machineId
    PaymentInfo:
      type: object
      description: Payment-related information.
      properties:
        amount:
          type: number
          format: double
          nullable: true
          description: Transaction amount.
          example: 15
        authAmount:
          type: number
          format: double
          nullable: true
          description: Conditional (if requestType is Auth). The authorized amount.
          example: 15
        currency:
          type: string
          nullable: true
          description: Currency code according to ISO4217.
          example: USD
        nayaxTokenId:
          type: string
          nullable: true
          description: Conditional (mandatory if COF). Saved Card token (Nayax token ID).
          example: NAYAXTOK12345
        siteId:
          type: integer
          format: int32
          nullable: true
          description: >-
            Site ID, identifying the region where the transaction originated in
            Nayax Servers.
          example: 1
        providerTransactionId:
          type: string
          nullable: true
          description: Transaction ID from the Payment Service Provider (PSP).
          example: PSP_TRANS_ABC
        providerExternalData:
          type: string
          nullable: true
          description: Additional data from the PSP.
          example: '{"pspRef": "REF123", "riskScore": 10}'
        decimalPlace:
          type: integer
          format: int32
          nullable: true
          description: >-
            The number of digits after the decimal point (e.g., amount = 100,
            decimalPlace = 2 --> amount for payment = 1.00).
          example: 2
      additionalProperties: false
      required:
        - amount
        - currency
    Platform:
      type: integer
      format: int32
      description: Platform from which the request originated.
      enum:
        - 0
        - 1
        - 2
      x-enum-varnames:
        - iOS
        - Android
        - Web
    RequestType:
      type: integer
      format: int32
      description: Session Transaction Type.
      enum:
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
        - 10
      x-enum-varnames:
        - Sale
        - Auth
        - Settlement
        - Void
        - Refund
        - PartialRefund
        - IncrementalAuth
        - CancelAuth
        - PartialCapture
        - AutoCapture
        - DelayAuth
    SessionInfo:
      type: object
      description: Session-related information.
      properties:
        nayaxSessionId:
          type: string
          nullable: true
          description: Unique Nayax Session ID that identifies the payment request.
          example: ABCDEF123456
        externalSessionId:
          type: string
          nullable: true
          description: >-
            Unique External Session ID that identifies the payment request, from
            the VAS ECOM provider.
          example: EXTSESS7890
        expirationDate:
          type: string
          format: date-time
          nullable: true
          description: Optional. Session expired date and time.
          example: '2025-12-31T23:59:59Z'
        additionalSessionData:
          type: string
          nullable: true
          description: >-
            Optional. Additional data related to the session in JSON format.
            This data could be required for the VAS ECOM provider.
          example: '{"providerSpecific": "data", "callbackUrl": "https://callback.com"}'
      additionalProperties: false
      required:
        - nayaxSessionId
    Status:
      type: object
      description: General status object for API responses.
      properties:
        verdict:
          type: string
          nullable: true
          description: Const string values 'Approved' or 'Declined'.
          example: Approved
        code:
          type: integer
          format: int32
          description: Response code. 0 for Approved, relevant decline code for Declined.
          example: 0
        statusMessage:
          type: string
          nullable: true
          maxLength: 255
          description: >-
            Optional. Session status message free text field or additional
            varying data.
          example: Transaction processed successfully.
        customDeclineCode:
          type: string
          nullable: true
          description: >-
            Custom decline code, can also be used to return the
            HashedEcomTransactionId for validate-merchant success.
          example: 9515af0d6b5c328b6383ff241fa7b03e489d6285a8db6a4f0d8369e3f044e8d7
      additionalProperties: false
      required:
        - verdict
    TokenInfo:
      type: object
      description: Information related to a card token.
      properties:
        nayaxTokenId:
          type: string
          nullable: true
          description: Nayax Token ID.
          example: NAYAXTOK12345
        cardBin:
          type: string
          nullable: true
          description: The first 6 numbers of the credit card (Bank Identification Number).
          example: '411111'
        cardFinalDigits:
          type: string
          nullable: true
          description: The last 4 digits of the credit card.
          example: '1111'
        expiryDate:
          type: string
          nullable: true
          description: Card expiration date in "MM/YYYY" format.
          example: 12/2025
        brand:
          type: string
          nullable: true
          description: Card brand (e.g., VISA, MASTERCARD).
          example: VISA
        tokenStatus:
          $ref: '#/components/schemas/TokenStatus'
          description: Status of the card token.
          example: 0
        actorId:
          type: integer
          format: int64
          nullable: true
          description: The ID of the actor/integrator associated with the token.
          example: 116383
      additionalProperties: false
      required:
        - nayaxTokenId
        - tokenStatus
    TokenModel:
      type: integer
      format: int32
      description: >-
        Indicates the desired token model. **Note on Token Behaviour**: A
        token's type (subscription/COF/top-up) is set during its initial
        creation and stored in our system. If a subsequent [Charge
        Token](ref:post_charge-token) request includes a different token type
        parameter, it is ignored. The system always uses the original token type
        from the initialization request, regardless of what is provided in later
        charge requests.
      enum:
        - 0
        - 1
        - 2
      x-enum-varnames:
        - StoredCard
        - Subscription
        - TopUp
    TokenRequest:
      type: object
      description: Request body for token-related operations (get or delete).
      properties:
        basicInfo:
          $ref: '#/components/schemas/BasicInfo'
          description: Basic transaction details, including merchant request ID.
        machineInfo:
          $ref: '#/components/schemas/MachineInfo'
          description: Information about the machine/terminal.
        validationKey:
          type: string
          nullable: true
          description: Validation key from the authentication flow.
          example: AUTH_KEY_FROM_VALIDATE
        cardHolderInfo:
          $ref: '#/components/schemas/CardHolderInfo'
          description: Cardholder details, specifically `cardHolderUniqId`.
        tokenInfo:
          $ref: '#/components/schemas/TokenInfo'
          description: Token information, specifically `nayaxTokenId`.
      additionalProperties: false
    TokenResponse:
      type: object
      description: Response body for token-related operations.
      properties:
        status:
          $ref: '#/components/schemas/Status'
          description: Operation status.
        tokenInfo:
          $ref: '#/components/schemas/TokenInfo'
          description: Details of the requested token.
      additionalProperties: false
    TokenStatus:
      type: integer
      format: int32
      description: Status of the card token.
      enum:
        - 0
        - 1
        - 2
        - 3
      x-enum-varnames:
        - Active
        - Expired
        - Suspended
        - Deleted
    TransactionIdentifyerType:
      type: integer
      format: int32
      description: Type of identifier used for a transaction.
      enum:
        - 0
        - 1
      x-enum-varnames:
        - NayaxSessionId
        - ExternalSessionId
    TransactionRequest:
      type: object
      description: >-
        Request body for processing a transaction (charge token, close
        transaction).
      properties:
        basicInfo:
          $ref: '#/components/schemas/BasicInfo'
          description: Basic transaction details.
        machineInfo:
          $ref: '#/components/schemas/MachineInfo'
          description: Information about the machine/terminal.
        validationKey:
          type: string
          nullable: true
          description: Validation key from the authentication flow.
          example: AUTH_KEY_FROM_VALIDATE
        cardHolderInfo:
          $ref: '#/components/schemas/CardHolderInfo'
          description: Cardholder details.
        additionalInfo:
          $ref: '#/components/schemas/AdditionalInfo'
          description: Additional information for the transaction and receipt.
        originalTransactionId:
          type: integer
          format: int32
          description: >-
            Required for second-step transactions (e.g., refund, void). The
            original Nayax transaction ID.
          example: 123456
        paymentInfo:
          $ref: '#/components/schemas/PaymentInfo'
          description: Payment-related information.
      additionalProperties: false
    TransactionResponse:
      type: object
      description: Response body for a transaction (charge token, close transaction).
      properties:
        status:
          $ref: '#/components/schemas/Status'
          description: Transaction status.
        basicInfo:
          $ref: '#/components/schemas/BasicInfo'
          description: >-
            Basic information about the transaction, including amount, currency,
            and merchant request ID.
        paymentInfo:
          $ref: '#/components/schemas/PaymentInfo'
          description: Payment-related information, including Nayax token ID if applicable.
      additionalProperties: false
    TransactionStatusRequest:
      type: object
      description: Request body for retrieving transaction status.
      properties:
        basicInfo:
          $ref: '#/components/schemas/BasicInfo'
          description: Basic request information.
        machineInfo:
          $ref: '#/components/schemas/MachineInfo'
          description: Information about the machine/terminal.
        validationKey:
          type: string
          nullable: true
          description: Validation key from the authentication flow.
          example: AUTH_KEY_FROM_VALIDATE
        transactionIdentifyerType:
          $ref: '#/components/schemas/TransactionIdentifyerType'
          description: The type of identifier used for the transaction query.
          example: 0
        sessionInfo:
          $ref: '#/components/schemas/SessionInfo'
          description: Session information, including NayaxSessionId or ExternalSessionId.
      additionalProperties: false
    TransactionStatusResponse:
      type: object
      description: Response body for retrieving transaction status.
      properties:
        status:
          $ref: '#/components/schemas/Status'
          description: Transaction status.
        externalTransactionStatus:
          $ref: '#/components/schemas/ExternalTransactionStatus'
          description: External transaction status from the billing provider.
      additionalProperties: false
    ValidateMerchantRequest:
      type: object
      description: Request body for validating a merchant and initiating authentication.
      properties:
        tokenId:
          type: integer
          format: int32
          nullable: true
          description: Token ID provided by Nayax to the VAS.
          example: 116383
        actorId:
          type: string
          nullable: true
          description: The unique identifier for the actor/integrator.
          example: someActorId
        machineId:
          type: string
          nullable: true
          description: Machine ID allocated in the Nayax Backoffice.
          example: '0434334921100366'
        random:
          type: string
          nullable: true
          description: >-
            A 27-character random string generated by Nayax and sent to the
            Integrator.
          example: 123456789qwertyui
        cipher:
          type: string
          nullable: true
          description: >-
            A 64-character long ciphertext generated by the Integrator by
            encrypting the `Ecom Transaction ID`||`=`||`Random String` using AES
            in ECB mode with an encryption key derived from the Secret Token.
          example: >-
            X305dITNTAw2vHsxE+taVcn6UvgBC3fdI6QbqeABgHbo8CKsoZhqISJfslehCiA+L7XYrqvKFci7C6BNj/trBuNJwBEjgBzKhhgpJ5ggnw=
      additionalProperties: false
x-readme:
  explorer-enabled: false
